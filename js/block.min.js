function initPageScript(){initTocInPostPage(),initSearchInTagPage()}function initTocInPostPage(){var e=$(".post-toc");e.length>0&&($("ol.toc").children().length>5&&e.show(),$(window).scroll(function(){var t=$(window).scrollTop(),n=155-t;n>=10?e.css("top",n):e.css("top",10)}),$("#btn-list").click(function(){return 0==e.find(".toc").length?void Materialize.toast("本文没有目录",1500):void("none"==e.css("display")?(e.show(),e.addClass("animated fadeInRight"),setTimeout(function(){e.removeClass("animated fadeInRight")},1e3)):(e.addClass("animated fadeOutRight"),setTimeout(function(){e.removeClass("animated fadeOutRight"),e.hide()},1e3)))}),$("#btn-list-close").click(function(){e.addClass("animated fadeOutRight"),setTimeout(function(){e.removeClass("animated fadeOutRight"),e.hide()},1e3)}),$("#btn-to-top").click(function(){goToTop()}))}function initSearchInTagPage(){var e=$("#search");if(e.length>0){var t=$(".tag-cloud a");e.on("keyup blur",function(){t.each(function(){$(this).text().toLowerCase().indexOf(e.val().toLowerCase())>-1?$(this).show():$(this).hide()})})}}function initFavicon(){var e=["/categories/代码/","/categories/日常/","/categories/研究/"],t=["/images/favicon/01.ico","/images/favicon/mario.ico","/images/favicon/book.ico"],n=0;for(n=0;n<e.length;n++)if(window.location.pathname==encodeURI(e[n])){$("#favicon").attr("href",t[n]);break}n==e.length&&$("#favicon").attr("href","/favicon.ico")}function initMenu(){$("#menu-categories").html("分类"),$("#menu-categories").addClass("grey darken-2"),$(".dropdown-button").dropdown({inDuration:300,outDuration:0,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!0,alignment:"left"});var e="/categories/",t=decodeURI(window.location.pathname);if(t.substr(0,e.length)==e){var n=t.substring(e.length,t.length-1);$("#menu-categories").html(n),$("#menu-categories").removeClass("grey darken-2"),$("#menu-categories").css("background-color","#ab8c91")}}function initMousetrap(){Mousetrap.bind("right",function(){var e=$(".block-pagination a[rel='next']");e.trigger("click")}),Mousetrap.bind("left",function(){var e=$(".block-pagination a[rel='prev']");e.trigger("click")}),Mousetrap.bind("g g",function(){goToTop()}),Mousetrap.bind("G",function(){goToBottom()})}function initHeaderImage(){var e=getRandomArr(BlockConfig.BANNER_START_NUM,BlockConfig.BANNER_END_NUM),t=0;$(".post .card-image img").each(function(){var n="/images/banner/"+e[t]+".jpg",i=$(this);$.ajax({type:"GET",url:n,success:function(e){i.attr("src",n)}}),t++})}function initContentImage(){$(".card-content img").materialbox()}function initModal(){$(".modal-trigger").leanModal({starting_top:"10%",ending_top:"30%"})}function initPjax(){null!=$.pjax&&(addPjaxAttr(),$(document).pjax("a[data-pjax]",".content",{fragment:".content",timeout:1e4}),$(document).on({"pjax:click":function(){$(".content").fadeOut(500),NProgress.start()},"pjax:start":function(){},"pjax:end":function(){$(".content").fadeIn(500),NProgress.done(),addPjaxAttr(),initPageScript(),initFavicon(),initMenu(),initHeaderImage(),initContentImage(),initModal()},"pjax:popstate":function(){}}))}function addPjaxAttr(){for(var e=[$(".page-number"),$(".extend"),$(".tag-cloud a")],t=0;t<e.length;t++)null!=e[t]&&e[t].attr("data-pjax","")}function notification(){var e=$("#btnSearchPanel");e.length>0&&e.click(function(){Materialize.toast("搜索功能施工中...",1500)});var t=!1;for(x in BlockConfig.SITE_URLS)if(document.referrer.indexOf(BlockConfig.SITE_URLS[x])>=0){t=!0;break}if(!t){var n=today.getHours();if(0==n)Materialize.toast("这么晚了还不睡吗？",3e3);else if(1==n){Materialize.toast("现在已经1点了",3e3);var i=$("<img src='/images/expression/xiuxian1.jpg' width='140px' />");Materialize.toast(i,4e3)}else if(n>=2&&n<=4){Materialize.toast("这个时间点还没睡，莫非你也在修仙",3e3);var i=$("<img src='/images/expression/xiuxian2.jpg' width='140px' />");Materialize.toast(i,4e3)}}}function modal(){$("#keybinding-info").click(function(){})}function initLive2D(){0!=$("#glcanvas").length&&($(window).width()<1150||$.getScript("/js/live2d.min.js").done(function(){$.getScript("/js/live2d-helper.min.js").done(function(){loadModel()})}))}function loadModel(){live2DHelper=new Live2DHelper({canvas:"glcanvas"});var e=getRandomNum(2,4),t="/live2d/asuna/asuna_0"+e+"/asuna_0"+e+".model.json";live2DHelper.loadModel(t,function(){live2DHelper.startTurnHead(),followMouse(),$("#glcanvas").hasClass("animated")||$("#glcanvas").addClass("animated fadeIn")})}function followMouse(){var e=!1;$("#glcanvas").mousedown(function(t){e=!0}).mouseup(function(t){e=!1}).mouseout(function(t){e=!1,null!=live2DHelper&&live2DHelper.viewPointer(0,0)}).mousemove(function(t){null!=live2DHelper&&e&&live2DHelper.followPointer(t)})}function seeMenu(){$(".menu-item").mousemove(function(e){null!=live2DHelper&&live2DHelper.viewPointer(e.pageX,e.pageY)})}function fun(){function e(){document.title=document[t]?"标题被我吃掉了 (°∀°)ﾉ - "+i:i}console.log("(。﹏。) 不要这么看人家，人家害羞\nCopyright © 2013-2017 Made with ♥ by huiyadanli"),14==today.getDate()&&$("html").click(function(e){var t,n=18;heartClickCounter++,10==heartClickCounter?t=$("<b></b>").text("OωO"):20==heartClickCounter?t=$("<b></b>").text("(๑•́ ∀ •̀๑)"):30==heartClickCounter?t=$("<b></b>").text("(๑•́ ₃ •̀๑)"):40==heartClickCounter?t=$("<b></b>").text("(๑•̀_•́๑)"):50==heartClickCounter?t=$("<b></b>").text("（￣へ￣）"):60==heartClickCounter?t=$("<b></b>").text("(╯°口°)╯(┴—┴"):70==heartClickCounter?t=$("<b></b>").text("૮( ᵒ̌皿ᵒ̌ )ა"):80==heartClickCounter?t=$("<b></b>").text("╮(｡>口<｡)╭"):90==heartClickCounter?(t=$("<b></b>").text("( ง ᵒ̌皿ᵒ̌)ง⁼³₌₃"),Materialize.toast("Fuzzy magic!",3e3),$("p").css("color","transparent"),$("p").css("text-shadow","#111 0 0 5px")):100==heartClickCounter?t=$("<b></b>").text("(ꐦ°᷄д°᷅)"):heartClickCounter>100&&heartClickCounter<=105?t=$("<b></b>").text("(ꐦ°᷄д°᷅)"):(t=$("<i class='material-icons'>favorite</i>"),n=Math.round(14*Math.random()+6));var i=e.pageX,o=e.pageY;t.css({"z-index":9999,top:o-20,left:i,position:"absolute",color:"#E94F06","font-size":n,"-moz-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none"}),$("body").append(t),t.animate({top:o-180,opacity:0},1500,function(){t.remove()})});var t,n,i=document.title;"undefined"!=typeof document.hidden?(t="hidden",n="visibilitychange"):"undefined"!=typeof document.mozHidden?(t="mozHidden",n="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange"),"undefined"==typeof document.addEventListener&&"undefined"==typeof document[t]||document.addEventListener(n,e,!1)}function getRandomNum(e,t){var n=t-e;return e+Math.round(Math.random()*n)}function getRandomArr(e,t){for(var n=[],i=0;i<=t-e;i++)n[i]=e+i;return shuffle(n),n}function shuffle(e){for(var t,n,i=e.length;0!=i;)n=Math.floor(Math.random()*i),i--,t=e[i],e[i]=e[n],e[n]=t;return e}function goToTop(){$("html, body").animate({scrollTop:0},500)}function goToBottom(){$("html, body").animate({scrollTop:$(document).height()},500)}var BlockConfig={SITE_URLS:["localhost","127.0.0.1","huiyadanli.github.io","huiyadanli.coding.me"],BANNER_START_NUM:1,BANNER_END_NUM:20},today=new Date,heartClickCounter=0,live2DHelper;$(function(){initPageScript(),initFavicon(),initMenu(),initMousetrap(),initHeaderImage(),initContentImage(),initModal(),initLive2D(),fun(),notification(),modal(),initPjax()});