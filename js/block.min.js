function initPageScript(){initTocInPostPage(),initSearchInTagPage()}function initTocInPostPage(){var t=$(".post-toc");t.length>0&&($("ol.toc").children().length>5&&t.show(),$(window).scroll(function(){var e=$(window).scrollTop(),n=155-e;n>=10?t.css("top",n):t.css("top",10)}),$("#btn-list").click(function(){return 0==t.find(".toc").length?void Materialize.toast("本文没有目录",1500):void("none"==t.css("display")?(t.show(),t.addClass("animated fadeInRight"),setTimeout(function(){t.removeClass("animated fadeInRight")},1e3)):(t.addClass("animated fadeOutRight"),setTimeout(function(){t.removeClass("animated fadeOutRight"),t.hide()},1e3)))}),$("#btn-list-close").click(function(){var t=t;t.addClass("animated fadeOutRight"),setTimeout(function(){t.removeClass("animated fadeOutRight"),t.hide()},1e3)}),$("#btn-to-top").click(function(){goToTop()}))}function initSearchInTagPage(){var t=$("#search");if(t.length>0){var e=$(".tag-cloud a");t.on("keyup blur",function(){e.each(function(){$(this).text().toLowerCase().indexOf(t.val().toLowerCase())>-1?$(this).css("display",""):$(this).css("display","none")})})}}function initFavicon(){var t=["/categories/代码/","/categories/日常/","/categories/研究/"],e=["/images/favicon/01.ico","/images/favicon/mario.ico","/images/favicon/book.ico"],n=0;for(n=0;n<t.length;n++)if(window.location.pathname==encodeURI(t[n])){$("#favicon").attr("href",e[n]);break}n==t.length&&$("#favicon").attr("href","/favicon.ico")}function initMenu(){$("#menu-categories").html("分类"),$("#menu-categories").addClass("grey darken-2"),$(".dropdown-button").dropdown({inDuration:300,outDuration:0,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!0,alignment:"left"});var t="/categories/",e=decodeURI(window.location.pathname);if(e.substr(0,t.length)==t){var n=e.substring(t.length,e.length-1);$("#menu-categories").html(n),$("#menu-categories").removeClass("grey darken-2"),$("#menu-categories").css("background-color","#ab8c91")}}function initMousetrap(){Mousetrap.bind("right",function(){var t=$(".block-pagination a[rel='next']").attr("href");null!=t&&(window.location.href=t)}),Mousetrap.bind("left",function(){var t=$(".block-pagination a[rel='prev']").attr("href");null!=t&&(window.location.href=t)}),Mousetrap.bind("g g",function(){goToTop()}),Mousetrap.bind("G",function(){goToBottom()})}function initHeaderImage(){var t=getRandomArr(BlockConfig.BANNER_START_NUM,BlockConfig.BANNER_END_NUM),e=0;$(".post .card-image img").each(function(){var n="/images/banner/"+t[e]+".jpg",i=$(this);$.ajax({type:"GET",url:n,success:function(t){i.attr("src",n)}}),e++})}function initContentImage(){$(".card-content img").materialbox()}function initModal(){$(".modal-trigger").leanModal({starting_top:"10%",ending_top:"30%"})}function initPjax(){addPjaxAttr(),$(document).pjax("a[data-pjax]",".content",{fragment:".content",timeout:1e4}),$(document).on({"pjax:click":function(){$(".content").fadeOut(500),NProgress.start()},"pjax:start":function(){},"pjax:end":function(){$(".content").fadeIn(500),NProgress.done(),addPjaxAttr(),initPageScript(),initFavicon(),initMenu(),initHeaderImage(),initContentImage(),initModal()},"pjax:popstate":function(){}})}function addPjaxAttr(){$(".page-number").attr("data-pjax",""),$(".extend").attr("data-pjax","")}function notification(){var t=$("#btnSearchPanel");t.length>0&&t.click(function(){Materialize.toast("搜索功能施工中...",1500)});var e=!1;for(x in BlockConfig.SITE_URLS)if(document.referrer.indexOf(BlockConfig.SITE_URLS[x])>=0){e=!0;break}if(!e){var n=today.getHours();if(0==n)Materialize.toast("这么晚了还不睡吗？",3e3);else if(1==n){Materialize.toast("现在已经1点了",3e3);var i=$("<img src='/images/expression/xiuxian1.jpg' width='140px' />");Materialize.toast(i,4e3)}else if(n>=2&&n<=4){Materialize.toast("这个时间点还没睡，莫非你也在修仙",3e3);var i=$("<img src='/images/expression/xiuxian2.jpg' width='140px' />");Materialize.toast(i,4e3)}}}function modal(){$("#keybinding-info").click(function(){})}function initLive2D(){0!=$("#glcanvas").length&&($(window).width()<1150||$.getScript("/js/live2d.min.js").done(function(){$.getScript("/js/live2d-helper.min.js").done(function(){loadModel()})}))}function loadModel(){live2DHelper=new Live2DHelper({canvas:"glcanvas"});var t=getRandomNum(2,4),e="/live2d/asuna/asuna_0"+t+"/asuna_0"+t+".model.json";live2DHelper.loadModel(e,function(){live2DHelper.startTurnHead(),followMouse(),$("#glcanvas").hasClass("animated")||$("#glcanvas").addClass("animated fadeIn")})}function followMouse(){var t=!1;$("#glcanvas").mousedown(function(e){t=!0}).mouseup(function(e){t=!1}).mouseout(function(e){t=!1,null!=live2DHelper&&live2DHelper.viewPointer(0,0)}).mousemove(function(e){null!=live2DHelper&&t&&live2DHelper.followPointer(e)})}function seeMenu(){$(".menu-item").mousemove(function(t){null!=live2DHelper&&live2DHelper.viewPointer(t.pageX,t.pageY)})}function fun(){function t(){document.title=document[e]?"标题被我吃掉了 (°∀°)ﾉ - "+i:i}console.log("(。﹏。) 不要这么看人家，人家害羞\nCopyright © 2013-2017 Made with ♥ by huiyadanli"),14==today.getDate()&&$("html").click(function(t){var e,n=18;heartClickCounter++,10==heartClickCounter?e=$("<b></b>").text("OωO"):20==heartClickCounter?e=$("<b></b>").text("(๑•́ ∀ •̀๑)"):30==heartClickCounter?e=$("<b></b>").text("(๑•́ ₃ •̀๑)"):40==heartClickCounter?e=$("<b></b>").text("(๑•̀_•́๑)"):50==heartClickCounter?e=$("<b></b>").text("（￣へ￣）"):60==heartClickCounter?e=$("<b></b>").text("(╯°口°)╯(┴—┴"):70==heartClickCounter?e=$("<b></b>").text("૮( ᵒ̌皿ᵒ̌ )ა"):80==heartClickCounter?e=$("<b></b>").text("╮(｡>口<｡)╭"):90==heartClickCounter?(e=$("<b></b>").text("( ง ᵒ̌皿ᵒ̌)ง⁼³₌₃"),Materialize.toast("Fuzzy magic!",3e3),$("p").css("color","transparent"),$("p").css("text-shadow","#111 0 0 5px")):100==heartClickCounter?e=$("<b></b>").text("(ꐦ°᷄д°᷅)"):heartClickCounter>100&&heartClickCounter<=105?e=$("<b></b>").text("(ꐦ°᷄д°᷅)"):(e=$("<i class='material-icons'>favorite</i>"),n=Math.round(14*Math.random()+6));var i=t.pageX,o=t.pageY;e.css({"z-index":9999,top:o-20,left:i,position:"absolute",color:"#E94F06","font-size":n,"-moz-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none"}),$("body").append(e),e.animate({top:o-180,opacity:0},1500,function(){e.remove()})});var e,n,i=document.title;"undefined"!=typeof document.hidden?(e="hidden",n="visibilitychange"):"undefined"!=typeof document.mozHidden?(e="mozHidden",n="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e="webkitHidden",n="webkitvisibilitychange"),"undefined"==typeof document.addEventListener&&"undefined"==typeof document[e]||document.addEventListener(n,t,!1)}function getRandomNum(t,e){var n=e-t;return t+Math.round(Math.random()*n)}function getRandomArr(t,e){for(var n=[],i=0;i<=e-t;i++)n[i]=t+i;return shuffle(n),n}function shuffle(t){for(var e,n,i=t.length;0!=i;)n=Math.floor(Math.random()*i),i--,e=t[i],t[i]=t[n],t[n]=e;return t}function goToTop(){$("html, body").animate({scrollTop:0},500)}function goToBottom(){$("html, body").animate({scrollTop:$(document).height()},500)}var BlockConfig={SITE_URLS:["localhost","127.0.0.1","huiyadanli.github.io","huiyadanli.coding.me"],BANNER_START_NUM:1,BANNER_END_NUM:20},today=new Date,heartClickCounter=0,live2DHelper;$(function(){initPageScript(),initFavicon(),initMenu(),initMousetrap(),initHeaderImage(),initContentImage(),initModal(),initLive2D(),fun(),notification(),modal(),initPjax()});