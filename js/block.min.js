function fixStylesheets(){setImageWidth(),$(".card-content img").materialbox();var e=[];$(".card-image img").each(function(){var t=$.Deferred();$(this).bind("load",function(){t.resolve()}).bind("error",function(){t.resolve()}),e.push(t)}),$.when.apply(null,e).done(function(){setFooterPosition()}),$(window).resize(function(){setImageWidth(),setFooterPosition()})}function setImageWidth(){$(".card-content img").each(function(){$(this).removeAttr("width");var e=$(".post .card-content").width();$(this).width()>e&&$(this).attr("width",e)})}function setFooterPosition(){var e=$(".footer-line"),t=parseFloat(e.css("margin-top").replace("px","")),n=$(window).height()-e.offset().top-e.height();if(n>0||t>50){var i=n+t;e.css("margin-top",i)}"hidden"==e.css("visibility")&&(e.css("visibility","visible"),e.hasClass("animated")||e.addClass("animated fadeIn"))}function initFavicon(){for(var e=["/categories/代码/","/categories/日常/","/categories/研究/"],t=["/images/favicon/01.ico","/images/favicon/mario.ico","/images/favicon/book.ico"],n=0;n<e.length;n++)if(window.location.pathname==encodeURI(e[n])){$("#favicon").attr("href",t[n]);break}}function initMenu(){$(".dropdown-button").dropdown({inDuration:300,outDuration:0,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!0,alignment:"left"});var e="/categories/",t=decodeURI(window.location.pathname);if(t.substr(0,e.length)==e){var n=t.substring(e.length,t.length-1);$("#menu-categories").html(n),$("#menu-categories").removeClass("grey darken-2"),$("#menu-categories").css("background-color","#ab8c91")}}function initMousetrap(){Mousetrap.bind("right",function(){var e=$(".block-pagination a[rel='next']").attr("href");null!=e&&(window.location.href=e)}),Mousetrap.bind("left",function(){var e=$(".block-pagination a[rel='prev']").attr("href");null!=e&&(window.location.href=e)}),Mousetrap.bind("g g",function(){goToTop()}),Mousetrap.bind("G",function(){goToBottom()})}function initHeaderImage(){var e=getRandomArr(BlockConfig.BANNER_START_NUM,BlockConfig.BANNER_END_NUM),t=0;$(".post .card-image img").each(function(){$(this).attr("src","/images/banner/"+e[t]+".jpg"),t++})}function initModal(){$(".modal-trigger").leanModal({starting_top:"10%",ending_top:"30%"})}function notification(){var e=$("#btnSearchPanel");if(e.length>0&&e.click(function(){Materialize.toast("搜索功能施工中...",1500)}),document.referrer.indexOf(BlockConfig.SITE_URL)<0){var t=today.getHours();if(0==t)Materialize.toast("这么晚了还不睡吗？",3e3);else if(1==t){Materialize.toast("现在已经1点了",3e3);var n=$("<img src='/images/expression/xiuxian1.jpg' width='140px' />");Materialize.toast(n,4e3)}else if(t>=2&&t<=4){Materialize.toast("这个时间点还没睡，莫非你也在修仙",3e3);var n=$("<img src='/images/expression/xiuxian2.jpg' width='140px' />");Materialize.toast(n,4e3)}}}function modal(){$("#keybinding-info").click(function(){})}function initLive2D(){0!=$("#glcanvas").length&&($(window).width()<1150||$.getScript("/js/live2d.min.js").done(function(){$.getScript("/js/live2d-helper.min.js").done(function(){loadModel()})}))}function loadModel(){live2DHelper=new Live2DHelper({canvas:"glcanvas"});var e=getRandomNum(2,4),t="/live2d/asuna/asuna_0"+e+"/asuna_0"+e+".model.json";live2DHelper.loadModel(t,function(){live2DHelper.startTurnHead(),followMouse()})}function followMouse(){var e=!1;$("#glcanvas").mousedown(function(t){e=!0}).mouseup(function(t){e=!1}).mouseout(function(t){e=!1,null!=live2DHelper&&live2DHelper.viewPointer(0,0)}).mousemove(function(t){null!=live2DHelper&&e&&live2DHelper.followPointer(t)})}function seeMenu(){$(".menu-item").mousemove(function(e){null!=live2DHelper&&live2DHelper.viewPointer(e.pageX,e.pageY)})}function fun(){console.log("(。﹏。) 不要这么看人家，人家害羞\nCopyright © 2013-2017 Made with ♥ by huiyadanli"),14==today.getDate()&&$("html").click(function(e){var t,n=18;heartClickCounter++,10==heartClickCounter?t=$("<b></b>").text("OωO"):20==heartClickCounter?t=$("<b></b>").text("(๑•́ ∀ •̀๑)"):30==heartClickCounter?t=$("<b></b>").text("(๑•́ ₃ •̀๑)"):40==heartClickCounter?t=$("<b></b>").text("(๑•̀_•́๑)"):50==heartClickCounter?t=$("<b></b>").text("（￣へ￣）"):60==heartClickCounter?t=$("<b></b>").text("(╯°口°)╯(┴—┴"):70==heartClickCounter?t=$("<b></b>").text("૮( ᵒ̌皿ᵒ̌ )ა"):80==heartClickCounter?t=$("<b></b>").text("╮(｡>口<｡)╭"):90==heartClickCounter?(t=$("<b></b>").text("( ง ᵒ̌皿ᵒ̌)ง⁼³₌₃"),Materialize.toast("Fuzzy magic!",3e3),$("p").css("color","transparent"),$("p").css("text-shadow","#111 0 0 5px")):100==heartClickCounter?t=$("<b></b>").text("(ꐦ°᷄д°᷅)"):heartClickCounter>100&&heartClickCounter<=105?t=$("<b></b>").text("(ꐦ°᷄д°᷅)"):(t=$("<i class='material-icons'>favorite</i>"),n=Math.round(14*Math.random()+6));var i=e.pageX,o=e.pageY;t.css({"z-index":9999,top:o-20,left:i,position:"absolute",color:"#E94F06","font-size":n,"-moz-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none"}),$("body").append(t),t.animate({top:o-180,opacity:0},1500,function(){t.remove()})})}function getRandomNum(e,t){var n=t-e;return e+Math.round(Math.random()*n)}function getRandomArr(e,t){for(var n=[],i=0;i<=t-e;i++)n[i]=e+i;return shuffle(n),n}function shuffle(e){for(var t,n,i=e.length;0!=i;)n=Math.floor(Math.random()*i),i--,t=e[i],e[i]=e[n],e[n]=t;return e}function goToTop(){$("html, body").animate({scrollTop:0},500)}function goToBottom(){$("html, body").animate({scrollTop:$(document).height()},500)}var BlockConfig={SITE_URL:"localhost",BANNER_START_NUM:1,BANNER_END_NUM:20},today=new Date,heartClickCounter=0,live2DHelper;$(function(){initFavicon(),initMenu(),initMousetrap(),initHeaderImage(),initModal(),initLive2D(),fun(),notification(),modal(),fixStylesheets(),$.fn.extend({animateCss:function(e){var t="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";this.addClass("animated "+e).one(t,function(){$(this).removeClass("animated "+e)})}})});